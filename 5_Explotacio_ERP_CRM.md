---
title: UD05: Explotaci√≥ de sistemes ERP-CRM
language: VAL
author: Toni Santos Silvestre [https://github.com/ToniSantosSilvestre]
subject: Sistemes de Gesti√≥ Empresarial
keywords: [SGE, 2024, Sistemes de Gesti√≥ Empresarial,Python]
IES: CIPFP Batoi (Alcoi) [https://portal.edu.gva.es/cipfpbatoi/]
header: ${title} - ${subject} (ver: ${today})
footer:${currentFileName}.pdf - ${author} - ${IES} - ${pageNo}/${pageCount}
typora-root-url:${filename}/../
typora-copy-images-to:${filename}/../assets
---

[TOC]

## 1. INTRODUCCI√ì
Odoo √©s un ERP-CRM de codi obert que es distribueix sota dos tipus de desplegament:

- On-premise en GNU/Linux o Windows amb dues versions (Community, gratu√Øta i Enterprise, de pagament).
- SaaS (Programari As A Service): l‚Äôempresa que desenvolupa Odoo tamb√© proporciona el seu servei en el n√∫vol. 

D'aquesta manera, una empresa pot tenir el seu propi Odoo en un servidor local, en un n√∫vol propi o en un n√∫vol de tercers. Tamb√© pot tenir acc√©s a Odoo pel SaaS d'Odoo o d'altres terceres empreses que proporcionen Odoo com SaaS.

La llic√®ncia d'Odoo ha anat canviant al llarg del temps. La llic√®ncia actual, de la versi√≥ 18 'Community' √©s LGPLv3.

Odoo t√© una arquitectura ‚Äúclient-servidor‚Äù de 3 capes:

- La base de dades en un servidor PostgreSQL.
- El servidor Odoo, que engloba la l√≤gica de negoci i el servidor web.
- La capa de client que √©s un SPA (Single Page Application). La capa client est√† dividida en almenys 3 interf√≠cies molt diferenciades:
    - El ‚ÄúBackend‚Äù on s'administra la base de dades per part dels administradors i empleats de l'empresa.
    - El ‚ÄúFrontend‚Äù o p√†gina web, on poden accedir els clients i empleats. Pot incloure una botiga i altres aplicacions.
    - El ‚ÄúTPV‚Äù per als terminals punt de venda que poden ser t√†ctils.

> üí¨ **Atenci√≥**: a m√©s d'usar el seu propi client, Odoo admet que altres aplicacions interactuen amb el seu servidor usant XML-RPC. Tamb√© es poden desenvolupar ‚Äúweb controllers‚Äù per a crear una API per a aplicacions web o m√≤bils, per exemple.

A part de l'arquitectura de 3 capes, Odoo √©s un sistema modular. Aix√≤ vol dir que es pot ampliar amb m√≤duls de tercers (oficials o no) i m√≤duls desenvolupats per nosaltres mateixos.

De fet, en Odoo hi ha un m√≤dul ‚Äúbase‚Äù que cont√© el funcionament b√†sic del servidor i a partir d'ac√≠ es carreguen tots els altres m√≤duls.

Quan instal¬∑lem Odoo, abans d'instal¬∑lar cap m√≤dul, tenim acc√©s al ‚Äúbackend‚Äù on gestionar poc m√©s que les opcions i usuaris. √âs necessari instal¬∑lar els m√≤duls necessaris per a un funcionament m√≠nim. Per exemple, el m√©s t√≠pic √©s instal¬∑lar almenys els m√≤duls de vendes, compres, CRM i comptabilitat.

Per a ampliar les funcionalitats o adaptar Odoo a les necessitats d'una empresa, no cal modificar el codi font d'Odoo. Tan sols necessitem crear un m√≤dul.

Els **m√≤duls d'Odoo** poden modificar el comportament del programa, l'estructura de la base de dades i/o la interf√≠cie d'usuari. En principi, un m√≤dul es pot instal¬∑lar i desinstal¬∑lar i els canvis que implicava el m√≤dul es reverteixen completament.
![Peticions de l'aplicaci√≥ d'Odoo](assets/imatges/05_01_esquema_peticions.png)

Odoo facilita el desenvolupament de m√≤duls perqu√®, a m√©s d'un ERP, √©s un framework de programaci√≥. Odoo t√© el seu propi framework tipus **RAD (Rapid Application Development)**. Aix√≤ significa que amb poc esfor√ß es poden aconseguir aplicacions amb altes prestacions i segures.

>‚ùï**Atenci√≥**: el poc esfor√ß √©s relatiu. Per a desenvolupar correctament en Odoo s√≥n necessaris amplis coneixements de Python, XML, HTML, Javascript i altres tecnologies associades com QWeb, JQuery, XML-RPC, etc. La corba d'aprenentatge √©s alta i la documentaci√≥ √©s escassa. A m√©s, els errors s√≥n m√©s dif√≠cils d'interpretar perqu√® no sabem tot el que est√† passant per davall. La frustraci√≥ inicial es veur√† compensada amb una major agilitat i menys errors.

Aquest framework es basa en alguns dels principis generals dels RAD moderns:

- La capa **ORM (Object Relational Mapping)** entre els objectes i la base de dades.
    - La combinaci√≥ **Classe Python ‚Üî ORM ‚Üî Tabla PostgreSQL** es coneix com a **Model**.
    - El programador no efectua el disseny de la base de dades, nom√©s de les classes i les seues relacions.
    - Tampoc √©s necessari fer consultes SQL, quasi tot es pot fer amb els m√®todes d'ORM d'Odoo.
- L‚Äôarquitectura **MVC** (Modelo-Vista-Controlador).
    - El model es programa declarant classes de Python que hereten de ‚Äú**models.Model**‚Äù. Aquesta her√®ncia provoca que actue l'ORM i √©s mapejen en la base de dades.
    - Les vistes es defineixen normalment en arxius XML i s√≥n llistes, formularis, calendaris, gr√†fics, men√∫s, etc. Aquest XML ser√† enviat al client web on el framework Javascript d'Odoo ho transforma en HTML.
    - El controlador tamb√© es defineix en fitxers Python, normalment al costat del model. El controlador s√≥n els m√®todes que proporcionen la l√≤gica de negoci.
- Odoo t√© una arquitectura de **Tinen√ßa M√∫ltiple**. De manera que un √∫nic servidor pot proporcionar servei a molts clients de bases de dades diferents.
- Odoo proporciona un dissenyador d'informes.
- El framework facilita la traducci√≥ de l'aplicaci√≥ a molts idiomes.

> üìñ **Important**: ja que Odoo facilita la traducci√≥, √©s una bona pr√†ctica programar tot en angl√©s, tant el nom de les variables com els textos que vam mostrar als usuaris. Posteriorment, podem afegir les traduccions necess√†ries.



## 2 La base de dades d'Odoo

Gr√†cies a l'ORM, no hi ha un disseny definit de la base de dades. La base de dades d'una empresa pot tenir algunes taules molt diferents d‚Äôaltres en funci√≥ del mapatge que l'ORM haja fet amb les classes actives en aquesta empresa. Per tant, √©s dif√≠cil trobar un disseny ‚Äúentitat-relaci√≥‚Äù o una cosa similar en la documentaci√≥ d'Odoo.

Cal afegir que Odoo t√© alguns models ja creats i ben documentats com:
- ‚Äúres.partner‚Äù (clients, prove√Ødors, etc.).
    - https://www.technaureus.com/odoo-partner-res-partner-concept/
- ‚Äúsale.order‚Äù (Ordre de venda).

Aquests models existeixen de base pel fet que estan en quasi totes les empreses i versions d'Odoo.

Per√≤ ni tan sols aquests tenen en la base de dades les mateixes columnes o relacions que en altres empreses. Moltes vegades necessitem saber el nom del model, del camp o de la taula en la base de dades. Per a aix√≤, Odoo proporciona en el seu ‚Äúbackend‚Äù el ‚Äúmode desenvolupador‚Äù per a saber el model i camp posant el ratol√≠ damunt d'un camp dels formularis.

> üìñ **Important**: el nom de les classes de Python sempre ha de ser en min√∫scula i amb el  punt per a separar per jerarquia. El nom d'un model, per tant, ser√†  sempre: ‚Äúmodul.model‚Äù. Si el model t√© un nom compost, se separa per ‚Äú_‚Äù.

> En la base de dades, el punt se substitueix per una barra baixa.



> üí¨ **Interessant**: aconsellem dedicar uns minuts a con√©ixer la base de dades usant el ‚Äúmode  desenvolupador‚Äù i el client de terminal de PostgreSQL. Per a aix√≤, podem repassar les consultes SQL traient, per exemple, el nom dels clients  que no han fet cap comanda.

## 3. Composici√≥ d'un m√≤dul

Odoo √©s un programa modular. Tant el servidor com el client es componen de m√≤duls que estenen al m√≤dul ‚Äúbase‚Äù. Qualsevol cosa que es vulga modificar en Odoo s'ha de fer creant un m√≤dul.

>üìñ **Important:** ja que Odoo √©s de codi obert i tot el codi est√† en Python, que no √©s un llenguatge compilat, podem alterar els fitxers Python o XML dels m√≤duls oficials, canviant el que ens interesse.

>**Aix√≤ pot funcionar, per√≤ √©s una mala pr√†ctica, ja que:**

>\- Qualsevol actualitzaci√≥ dels m√≤duls oficials esborraria els nostres canvis.

>\- Si no actualitzem, perdrem acc√©s a nova funcionalitats i estarem exposats a problemes de seguretat.

>\- Revertir canvis √©s m√©s dif√≠cil i la soluci√≥ sol passar per tornar a la versi√≥ oficial.

Podem crear m√≤duls per a modificar, eliminar o ampliar parts d'altres m√≤duls. Tamb√© podem crear m√≤duls per a afegir funcionalitats completament noves a Odoo sense interferir amb la resta del programa. En qualsevol cas, el sistema modular est√† dissenyat perqu√® es puguen instal¬∑lar i desinstal¬∑lar m√≤duls sense afectar la resta del programa.

**Exemple**: pot ser que una empresa no necessite totes les dades que demana Odoo en registrar un producte. Com a soluci√≥, podem fer un m√≤dul que elimine de la vista els camps innecessaris. Si despr√©s es comprova que aquells camps eren necessaris, nom√©s cal desinstal¬∑lar el m√≤dul i tornen a apar√©ixer.

Aquest sistema modular funciona perqu√®, cada vegada que es reinicia el servidor o s'actualitza un m√≤dul, s'interpreten els fitxers Python que defineixen els models i l'ORM mapeja les novetats en la base de dades. A m√©s, es carreguen les dades dels fitxers XML en la base de dades i s'actualitzen les dades que han canviat.

### 3.1 Estructura d'un m√≤dul

Els m√≤duls modifiquen parts de Model-Vista-Controlador. D'aquesta manera, un m√≤dul es compon de fitxers Python, XML, CSS o Javascript entre altres. Tots aquests arxius han d'estar en una carpeta amb el nom del m√≤dul.



Hi ha una estructura de subcarpetes i de noms d'arxius que quasi tots els m√≤duls respecten. Per√≤ tot dep√©n del que pose en el fitxer ‚Äú**__manifest__.py‚Äù**. Aquest fitxer cont√© un diccionari de Python amb informaci√≥ del m√≤dul i la ubicaci√≥ dels altres fitxers. A m√©s, l'arxiu ‚Äú**__init__.py**‚Äù indica quins fitxers Python s'han d'importar.



Dins d'un m√≤dul podem trobar:

- Fitxers Python que defineixen els models i els controladors.
- Fitxers XML que defineixen dades que han d'anar a la base de dades. Dins d'aquestes dades, podem trobar:
    - Definici√≥ de les vistes i les accions.
    - Dades de demo.
    - Dades est√†tiques que necessita el m√≤dul.
- Fitxers est√†tics com a imatges, CSS, Javascript, etc. que han de ser carregats per la interf√≠cie web.
- Controladors web per a gestionar les peticions web.

Els m√≤duls es guarden en un directori indicat en l'opci√≥ ‚Äú**--addons-path**‚Äù en llan√ßar el servidor o en el fitxer de configuraci√≥ ‚Äú**odoo.conf**‚Äù. Els m√≤duls poden estar en m√©s d'un directori i depenen de la mena d'instal¬∑laci√≥ o la distribuci√≥ o versi√≥ que s'instal¬∑le.



Per a crear un m√≤dul es pot fer manualment creat la carpeta, el manifest, els directoris i fitxers o utilitzant una eina de l√≠nia de comandos anomenada ‚Äú**odoo scaffold**‚Äù.

> odoo scaffold nom_del_modul /ruta_don_colocarlo

Una vegada executat aquest comando, tenim en la ruta indicada, l'estructura b√†sica de directoris i fitxers amb una mica de codi d'exemple.

> ‚ùï**Atenci√≥:** encara que usar ‚Äúscaffold‚Äù ens proporciona una base, durant la unitat pot ser bona idea basar-se en exemples proporcionats a classe.

## 4.  Models

## 4.1 Introducci√≥ als models en Odoo

Els models s√≥n una abstracci√≥ pr√≤pia de molts frameworks i relacionada amb l'ORM. Un model es defineix com una classe Python que hereta de la classe ‚Äú**models.Model**‚Äù. En heretar d'aquesta classe, adquireix unes propietats de manera transparent per al programador. A partir d'aquest moment, les classes del llenguatge de programaci√≥ queden per davall d'un nivell m√©s d'abstracci√≥.

Una classe heretada de ‚Äúmodels.Model‚Äù es comporta de la seg√ºent manera:

- Pot ser accedida com a model, com ‚Äúrecordset‚Äù (conjunt de registres) o com ‚Äúsingleton‚Äù (un unic registre). Si √©s accedida com a model, t√© m√®todes de model per a crear ‚Äúrecordsets‚Äù, per exemple. Si √©s accedida com ‚Äúrecordset‚Äù, es pot accedir a les dades que guarda.
- Pot tenir atributs interns de la classe, ja que continua sent Python. Per√≤ els atributs que es guarden en la base de dades s'han de definir com ‚Äúfields‚Äù. Un ‚Äúfield‚Äù √©s una inst√†ncia de la classe ‚Äúfields.Field‚Äù, i t√© els seus propis atributs i funcions.
    - Odoo analitzar√† el model, cercar√† els atributs tipus ‚Äúfield‚Äù i les seues propietats i mapear√° autom√†ticament tot aix√≤ en l'ORM.
- Els m√®todes definits per als ‚Äúrecordset‚Äù reben un argument anomenat ‚Äúself‚Äù que pot ser un ‚Äúrecordset‚Äù amb una col¬∑lecci√≥ de registres. Per tant, han d'iterar en el self per a fer la seua funci√≥ en cadascun dels registres.
- Un model representa a la taula sencera en la base de dades. Un ‚Äúrecordset‚Äù representa a una col¬∑lecci√≥ de registres d'aqueixa taula i tamb√© al model. Un ‚Äúsingleton‚Äù √©s un ‚Äúrecordset‚Äù d'un sol element.
- Els models tenen les seues pr√≤pies funcions per a no haver d'accedir a la base de dades per a modificar o crear registres. A m√©s, incorporen restriccions d'integritat.

Aquest √©s l'exemple d'un model amb solament un ‚Äúfield‚Äù:

![Model de classe d'Odoo](/assets/imatges/05_02_classe_model.png)

Sobre el codi anterior, vegem detalladament tot el que passa:

- Es defineix una classe de Python que hereta de ‚Äú**models.Model**‚Äù
- Es defineixen dos atributs ‚Äú**_name**‚Äù i ‚Äú**_description**‚Äù. El ‚Äú**_name**‚Äù √©s obligatori en els models i √©s el nom del model. Ac√≠ s'observa l'abstracci√≥, ja no s'accedir√† a la classe ‚Äú**Amodel**‚Äù, sin√≥ al model ‚Äú**a.model**‚Äù.
- Despr√©s est√† la definici√≥ d'un altre atribut tipus ‚Äú**field**‚Äù que ser√† mapatge per l'ORM en la base de dades. Com es pot observar, crida al constructor de la classe ‚Äú**fields.Char**‚Äù amb uns arguments. Tots els arguments s√≥n opcionals en el cas de ‚Äú**Char**‚Äù. Hi ha constructors per a tots els tipus de dades.

> üí¨ **Interessant**: √©s molt probable que a hores d'ara no entengues el perqu√® de la majoria  del codi anterior. Els frameworks requereixen entendre moltes coses  abans de poder comen√ßar. No obstant aix√≤, amb aquest fragment de codi ja tenim solucionat l'emmagatzematge en la base de dades, la integritat de les dades i part de la interacci√≥ amb l'usuari.

> üí¨ **Interessant**: Odoo est√† pensat perqu√® siga f√†cilment modificable per la web. Sense  necessitat d'entrar al codi. Aix√≤ √©s molt √∫til per a prototipar les  vistes, per exemple.
> Una de les  funcionalitats √©s la manera desenvolupador, que permet, entre moltes  altres coses, explorar els models que t√© en aquest moment el servidor. 

Els models tenen alguns atributs del model, com ‚Äú**_name**‚Äù o ‚Äú**_description**‚Äù. Un altre atribut de model important √©s ‚Äú**_rec_name**‚Äù que indica que atribut pren nom el registre i que per defecte apunta a l'atribut ‚Äúname‚Äù (no confondre amb ‚Äú_name‚Äù).

- En les vistes (que veurem m√©s endavant), en alguns camps es basa en l'atribut marcat per ‚Äú**_rec_name**‚Äù, que per defecte √©s ‚Äú**name**‚Äù. Si no tenim un atribut ‚Äúname‚Äù o volem que siga un altre atribut el que de nom, podem modificar-ho amb ‚Äú**_rec_name=‚Äônomatribut**‚Äô‚Äù.



 ### 4.2 Atributs tipus ‚Äúfield‚Äù simples

Els models tenen altres atributs tipus ‚Äúfield‚Äù, que es mapejen en la base  de dades i als quals l'usuari t√© acc√©s i m√®todes que conformen el  controlador. A continuaci√≥ detallarem tots els tipus de ‚Äúfield‚Äù que hi  ha i les seues possibilitats:

En primer lloc, definim els ‚Äúfields‚Äù de dades m√©s habituals:

- **Integer**
- **Char**
- **Text**
- **Date**
- **Datetime**
- **Float**
- **Boolean**
- **Html**
- **Binary**: arxius binaris que guarda en format base64. Poden guardar-se imatges o  altres elements. Abans d'Odoo 13 en aquest tipus de ‚Äúfields‚Äù es  guardaven les imatges.

Dins dels ‚Äúfields‚Äù de dades, hi ha alguns una mica m√©s complexos:

- **Image**: a partir de la versi√≥ 13 d'Odoo es poden guardar imatges en aquest  ‚Äúfield‚Äù. Cal definir el ‚Äúmax_width‚Äù o ‚Äúmax_height‚Äù i es redimensionar√†  en guardar. 
- **Selection**: guarda una dada, per√≤ cal dir-li amb una llista de tuples les opcions que t√©.

Ac√≠ un exemple de ‚ÄúSelection‚Äù:

```python
type = fields.Selection([('1','Basic'),('2','Intermediate'),('3','Completed')]) 

aselection = fields.Selection(selection='a_function_name') # se puede definir su contenido en una funci√≥n.
```

Tots els ‚Äúfields‚Äù esmentats tenen un constructor que funciona de la mateixa  manera que en l'exemple anterior. Poden tenir un nom, un valor per  defecte, o fins i tot pot definir-se el seu contingut mitjan√ßant una  funci√≥.

Al llarg d'aquest text es veuran exemples de com s'han definit ‚Äúfields‚Äù segons les necessitats.

### 4.3 Atributs ‚Äúfields‚Äù relacionals

A continuaci√≥, observarem els ‚Äúfields‚Äù relacionals. At√©s que l'ORM evita  que h√†gem de crear les taules i les seues relacions en la base de dades, quan existeixen relacions entre models es necessiten uns camps que  definisquen aquelles relacions.



**Exemple**: una comanda de venda t√© un client i un client pot fer moltes comandes de  venda. Al seu torn, aquesta comanda t√© moltes l√≠nies de comanda, que s√≥n nom√©s d‚Äôaquesta comanda i tenen un producte, que pot estar en moltes  l√≠nies de venda.



En situacions com la de l'exemple, aquestes relacions acaben estant en la  base de dades amb claus alienes. Per√≤ amb els frameworks que implementen ORM, tot aix√≤ √©s molt m√©s senzill.

Per a aix√≤ utilitzarem els ‚Äúfields‚Äù relacionals d'Odoo:

- **Many2one**: √©s el m√©s simple. Indica que el model en el qual est√† t√© una relaci√≥  molts a un amb un altre model. Aix√≤ significa que un registre t√© relaci√≥ amb un √∫nic registre de l'altre model, mentre que l'altre registre pot  tenir relaci√≥ amb molts registres del model que t√© el ‚ÄúMany2one‚Äù. En la  taula de la base de dades, aix√≤ es traduir√† en una clau aliena a l'altra taula.
    - Exemple on es pret√©n que cada ciutat emmagatzeme el seu pa√≠s.
    ![Exemple de relaci√≥ Many2One](/assets/imatges/05_03_relacio_many2one.png)

- Les de ‚Äúalumnes amb m√≤duls‚Äù, descrita en l'exemple anterior.
- Una nova relaci√≥, on es relacionen alumnes repetidors amb m√≤duls pendents.

No han de coincidir, per√≤ si no s'especifica una taula interm√®dia diferent, **Odoo considerar√† que √©s la mateixa relaci√≥**. En aquests casos cal especificar la taula interm√®dia amb la sintaxi completa per a evitar errors:

```python
alumnos_ids = fields.Many2many(comodel_name='modulo.alumno',
relation='modulos_alumnos', # El nombre de la tabla intermedia
column1='modulo_id', # El nombre en la tabla intermedia de la clave a este modelo
column2='alumno_id')  # El nombre de la clave al otro modelo.
repetidores_ids = fields.Many2many(comodel_name='modulo.alumno',
relation='modulos_alumnos_repetidores', # El nombre de la tabla intermedia
column1='modulo_id', # El nombre en la tabla intermedia de la clave a este modelo
column2='alumno_id')  # El nombre de la clave al otro modelo.
modulos_ids = field.Many2many(comodel_name='modulo.modulo',
relation='modulos_alumnos', # El nombre de la tabla intermedia
column1='alumno_id', # El nombre en la tabla intermedia de la clave a este modelo
column2='modulo_id')  # El nombre de la clave al otro modelo.
pendientes_ids = field.Many2many(comodel_name='modulo.modulo',
relation='modulos_alumnos_repetidores', # El nombre de la tabla intermedia
column1='alumno_id', # El nombre en la tabla intermedia de la clave a este modelo
column2='modulo_id')  # El nombre de la clave al otro modelo.
```

Les relacions ‚ÄúMany2one‚Äù, ‚ÄúOne2many‚Äù i ‚ÄúMany2many‚Äù suposen la majoria de les relacions necess√†ries en qualsevol programa. Hi ha un altre tipus de ‚Äúfields‚Äù relacionals especials que faciliten la programaci√≥:
- **related**: en realitat no √©s un tipus de ‚Äúfield‚Äù, sin√≥ una possible propietat de qualsevol dels tipus. El que fa un ‚Äúfield related‚Äù √©s mostrar una dada que est√† en un registre d'un altre model amb el qual es t√© una relaci√≥ ‚ÄúMany2one‚Äù.

Si prenem com a exemple l'anterior de les ciutats i pa√Øsos, imaginem que volem mostrar la bandera del pa√≠s en el qual est√† la ciutat. La bandera ser√† un camp ‚ÄúImage‚Äù que estar√† en el model pa√≠s, per√≤ el volem mostrar tamb√© en el model ciutat. Per a aix√≤ tenim dues possibles solucions:
- La soluci√≥ dolenta seria guardar la bandera en cada ciutat.

- La bona soluci√≥ √©s usar un ‚Äúfield related‚Äù per a accedir a la bandera.

  ```python
  pais_id = fields.Many2one('modulo.pais') # Esto en el modelo Ciudad
  bandera = fields.Image(related='pais_id.bandera') # Suponiendo que existe el field bandera y es de tipo Image.
  ```

  

>üìñ **Important**: el ‚Äúfield related‚Äù pot tenir 'store=True' si volem que ho guarde en la base de dades. En la majoria de casos √©s redundant i no serveix. Per√≤ pot ser que per raons de rendiment, o per a poder cercar, s'haja de guardar. Aix√≤ no respecta la tercera forma normal. En aqueix cas, Odoo s'encarrega de mantenir la coher√®ncia de les dades. 

>üìñ **Important**: un altre √∫s possible dels ‚Äúfield related‚Äù pot ser fer refer√®ncia a ‚Äúfields‚Äù del propi model per a tenir les dades repetides. Aix√≤ √©s molt √∫til en les imatges, per exemple, per a emmagatzemar versions amb diferents resolucions. Tamb√© pot ser √∫til per a mostrar els mateixos ‚Äúfields‚Äù amb diversos ‚Äúwidgets‚Äù.

- **Reference**: √©s una refer√®ncia a un camp arbitrari d'un model. En realitat no provoca una relaci√≥ en la base de dades. El que guarda √©s el nom del model i del camp en un ‚Äúfield char‚Äù.
- **Many2oneReference**: √©s un ‚ÄúMany2one‚Äù per√≤ en el qual tamb√© cal indicar el model al qual fa refer√®ncia. No s√≥n molt utilitzats.

> üí¨ **Interessant**: en algunes ocasions, influ√Øts pel pensament de les bases de dades relacionals, podem decidir que necessitem una relaci√≥ **‚ÄúOne2one‚Äù. Odoo va deixar d'usar-les per motius de rendiment i recomana en el seu lloc unir els dos models en un**. No obstant aix√≤, es pot imitar amb dos ‚ÄúMany2many‚Äù computats o un ‚ÄúOne2many‚Äù limitat a un sol registre. En els dos casos, ser√† tasca del programador garantir el bon funcionament d'aqueixa relaci√≥.

Una vegada estudiat el concepte de model i dels 'fields', detinguem-nos un moment a analitzar aquest codi que defineix 2 models:

```python
# -*- coding: utf-8 -*-
from odoo import models, fields, api
from openerp.exceptions import ValidationError
class net(models.Model):
    _name = 'networks.net'
    _description = 'Networks Model'
    name = fields.Char()
    net_ip = fields.Char()
    mask = fields.Integer()
    net_map = fields.image()
    net_class = fields.Selection([('a','A'),('b','B'),('c','C')])
    pcs = fields.One2many('networks.pc','net')
    servers = fields.Many2many('networks.pc',relation='net_servers')              
class pc(models.Model):
    _name = 'networks.pc'
    _description = 'PCs Model'
    name = fields.Char(default="PC")
    number = fields.Integer()
    ip = fields.Char()
    ping = fields.Float()
    registered = fields.Date()
    uptime = fields.Datetime()
    net = fields.Many2one('networks.net')
    user = fields.Many2one('res.partner')
    servers = fields.Many2many('networks.net',relation='net_servers')
```

Com es pot veure, estan quasi tots els tipus b√†sics de field. Tamb√© podem veure fields relacionals. Parem atenci√≥ al ‚ÄúMany2one‚Äù anomentat ‚Äúnet‚Äù dels ‚ÄúPC‚Äù que permet que funcione l'‚ÄùOne2many‚Äù anomenat ‚Äúpcs‚Äù del model ‚Äúnetworks.net‚Äù. Tamb√© s√≥n interessants els ‚ÄúMany2many‚Äù en els quals declarem el nom de la relaci√≥ per a controlar el nom de la taula interm√®dia.

Una vegada repassats els tipus de fields i vist un exemple, ja podr√≠em fer un m√≤dul amb dades est√†tiques i relacions entre els models. Ens faltaria la vista per a poder veure aquests models en el client web. Pots passar directament a l'apartat de la vista si vols tenir un m√≤dul funcional m√≠nim. Per√≤ en el model queden algunes coses que explicar.

